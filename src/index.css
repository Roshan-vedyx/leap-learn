/* Import neurodivergent-friendly accessibility styles */
@import './styles/accessibility.css';
@import './styles/grid.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global base layer overrides for accessibility */
@layer base {
  /* Ensure proper font loading */
  
  /* Root element setup */
  html {
    height: 100%;
    scroll-behavior: smooth;
  }

  body {
    height: 100%;
    margin: 0;
    padding: 0;
    font-family: var(--font-primary, 'Inter', 'Nunito Sans', system-ui, sans-serif);
    line-height: 1.6;
    letter-spacing: 0.025em;
    word-spacing: 0.1em;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
  }

  #root {
    height: 100%;
    isolation: isolate;
  }

  /* Focus management for accessibility */
  *:focus {
    outline: none;
  }

  *:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
    border-radius: 4px;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    :root {
      --border: 0 0% 0%;
      --input: 0 0% 100%;
      --ring: 0 0% 0%;
    }
  }

  /* Reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* Component layer for reusable patterns */
@layer components {
  /* Screen reader only content */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Skip links for keyboard navigation */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    padding: 8px 12px;
    text-decoration: none;
    border-radius: 4px;
    z-index: 1000;
    font-weight: 500;
    transition: top 0.3s ease;
  }

  .skip-link:focus {
    top: 6px;
  }

  /* Loading states */
  .loading {
    opacity: 0.7;
    pointer-events: none;
    cursor: wait;
  }

  /* Disabled states */
  .disabled {
    opacity: 0.5;
    pointer-events: none;
    cursor: not-allowed;
  }

  /* Error states */
  .error {
    color: hsl(var(--destructive));
    border-color: hsl(var(--destructive));
  }

  .success {
    color: hsl(var(--autism-secondary));
    border-color: hsl(var(--autism-secondary));
  }

  /* Interactive element base styles */
  .interactive {
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .interactive:hover {
    transform: translateY(-1px);
  }

  .interactive:active {
    transform: translateY(0);
  }

  /* Text selection styling */
  ::selection {
    background-color: hsl(var(--primary) / 0.3);
    color: hsl(var(--foreground));
  }

  ::-moz-selection {
    background-color: hsl(var(--primary) / 0.3);
    color: hsl(var(--foreground));
  }
}

/* Utility layer for specific accessibility helpers */
@layer utilities {
  /* Font family utilities */
  .font-dyslexia {
    font-family: var(--dyslexia-font-primary) !important;
  }

  .font-readable {
    font-family: 'Lexend', 'Inter', system-ui, sans-serif;
  }

  .font-primary {
    font-family: var(--font-primary);
  }

  /* Spacing utilities for accessibility */
  .letter-spacing-wide {
    letter-spacing: 0.05em;
  }

  .word-spacing-wide {
    word-spacing: 0.16em;
  }

  /* Professional shadow utilities */
  .shadow-soft {
    box-shadow: var(--shadow-sm);
  }

  .shadow-gentle {
    box-shadow: var(--shadow-md);
  }

  .shadow-elevated {
    box-shadow: var(--shadow-lg);
  }

  .shadow-premium {
    box-shadow: var(--shadow-xl);
  }

  /* Animation utilities */
  .animate-gentle-bounce {
    animation: gentle-bounce 2s infinite;
  }

  .animate-soft-pulse {
    animation: soft-pulse 3s infinite;
  }

  .animate-calm-fade {
    animation: calm-fade 0.5s ease-out;
  }

  .animate-subtle-bounce {
    animation: subtle-bounce 2s infinite;
  }

  /* Professional gradient utilities */
  .gradient-card {
    background: linear-gradient(to bottom, var(--card-bg-from), var(--card-bg-to));
  }

  .gradient-calm {
    background: linear-gradient(135deg, var(--autism-calm-mint), var(--autism-calm-lavender));
  }

  .gradient-focus {
    background: linear-gradient(135deg, var(--autism-calm-sage), var(--autism-calm-sky));
  }

  /* Touch target utilities */
  .touch-target {
    min-height: var(--touch-target-min);
    min-width: var(--touch-target-min);
  }

  .touch-target-comfortable {
    min-height: var(--touch-target-comfortable);
    min-width: var(--touch-target-comfortable);
  }

  .touch-target-large {
    min-height: var(--touch-target-large);
    min-width: var(--touch-target-large);
  }

  /* No print utility */
  .no-print {
    @media print {
      display: none !important;
    }
  }

  /* Professional color utilities */
  .text-deep-ocean-blue { color: var(--deep-ocean-blue); }
  .text-sage-green { color: var(--sage-green); }
  .text-warm-charcoal { color: var(--warm-charcoal); }
  .text-soft-lavender { color: var(--soft-lavender); }
  .text-muted-coral { color: var(--muted-coral); }
  .text-cool-mint { color: var(--cool-mint); }

  .bg-deep-ocean-blue { background-color: var(--deep-ocean-blue); }
  .bg-sage-green { background-color: var(--sage-green); }
  .bg-warm-charcoal { background-color: var(--warm-charcoal); }
  .bg-soft-lavender { background-color: var(--soft-lavender); }
  .bg-muted-coral { background-color: var(--muted-coral); }
  .bg-cool-mint { background-color: var(--cool-mint); }

  .border-deep-ocean-blue { border-color: var(--deep-ocean-blue); }
  .border-sage-green { border-color: var(--sage-green); }
  .border-soft-lavender { border-color: var(--soft-lavender); }
  .border-muted-coral { border-color: var(--muted-coral); }
  .border-cool-mint { border-color: var(--cool-mint); }
}

/* Print styles */
@media print {
  * {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  a, a:visited {
    text-decoration: underline;
  }
  
  body {
    font-size: 12pt;
    line-height: 1.5;
  }
  
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  
  p, blockquote, li {
    page-break-inside: avoid;
  }
}

/* Custom keyframes for gentle animations */
@keyframes gentle-bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-5px);
  }
}

@keyframes soft-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.8;
  }
}

@keyframes calm-fade {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes subtle-bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-2px);
  }
  60% {
    transform: translateY(-1px);
  }
}